## 문제상황 제시
나는 지금까지 어떤 기능을 만들 때는 꼭 해당 기능 맞춤형 API 하나가 만들어져야 한다고 생각했다.
그런데 꼭 기능별로 하나의 API가 나와야 한다는 것은 나만의 틀이었을 뿐이었다.


>**"우리가 restful 하게 api를 만드는 것은 리소스를 생성, 수정, 삭제, 조회하는 것이지 특정 기능만을 위한 api는 아니다"**

>**"기능이 있다고 그 기능의 API 하나를 설계 해야 하는 것이 아니라 그 로직을 설계 해야 하는 것이었다."** 


SKKA 프로젝트를 하면서 "좌석 시간 변경" 기능을 만들고 API를 붙여 보니, 
해당 프로젝트에는 API가 총 4개가 있었다 ("좌석 예약", "좌석 이동", "좌석 이용 시간 변경", "좌석 예약 취소/퇴실"). 
기능별로 꼭 하나의 API를 설계 해야 한다고 생각하고 있었던 것이었다.

이렇게 API를 만들다 보니 코드의 반복이 계속 되었다. 
이로 인해 코드가 복잡해지며 서비스 로직에서 하나의 메소드에서 하나의 역할에 충실하지 못한 메소드가 나와야했다.



## 해결방안 모색
이 문제를 해소하기 위해서는 **코드의 재사용**이 필요했다.

예를 들어 **"좌석 시간 변경"** 기능을 개발할 때 여러 로직들이 다른 API 에서 사용되는 서비스와 도메인 **로직이 겹쳤다.**
이를 해결하기 위해 해당 기능("좌석 시간 변경")을 개발할 때 "좌석 예약 기능"과 "좌석 삭제 기능"을 사용하면 풀리는 문제였다.



## 찾은 해결방안 적용
- 신규 좌석으로 예약
- 신규 좌석으로 예약이 된 경우 기존 좌석에 대한 스케줄 삭제
- 신규 좌석 예약이 실패한 경우 좌석 변경 실패

위와 같이 **"좌석 시간 변경"** 기능을 수행 하려면  **"스케줄 예약"**, **"스케줄 삭제"** 두 개의 API 호출이 필요하다.

```
POST /seats/1 {
  "customerId" : 1,
  "startedTime" : "2023-01-10T17:00:00",
  "endTime" : "2023-01-10T20:00:00"
}
```


```
DELETE /seats/1/schedules/1
```

## 결과
다음 두 개의 API가 "좌석 시간 변경" 기능을 할 수 있는 구조가 된다.

이런 구조가 되면서 코드의 반복을 줄일 수 있고 **코드의 재사용**이 가능해지며 **하나의 역할에 충실**할 수 있는 구조가 되었다.

